<!-- Form for product details -->
<div></div>
<form class="form">
  

  <!-- Informacion del Producto -->
  <div class="form-row">
    <div class="input-data">
      <input type="chart" required class="input" 
             placeholder=" " name="Nombre Producto"
             [(ngModel)]="product['Nombre Producto']">
      <div class="underline"></div>
      <label>Nombre Producto</label>
    </div>
  </div>
  
  <div class="form-row">
      <div class="checkbox-wrapper">
        <label>Tarjeta</label>
        <input type="checkbox" name="tipo de producto" [(ngModel)]="isTarjeta" (change)="tipoDeProducto($event)">
        <label>Refinanciar</label>
        <input type="checkbox" name="refinanciamiento" [(ngModel)]="isRef" (change)="eleccionRef($event)"/>
      </div>
  </div>
  
<div class="form-row" *ngFor="let field of [
    'Deuda Actual',
    'Plazo Actual',
    'Pago Mensual',
    'Tasa Entidad',
    'Tasa Real',
    'Diferencia Tasas',
    'Interes Actual',
    'Interes Beneficiar',
    'Diferencia Interes'
    ]; let i = index">
<div class="input-data">
  <input 
    type="chart"
    required 
    class="input" 
    placeholder=" " 
    [name]="'input' + i" 
    [(ngModel)]="product[field]"
    (keyup)="fNumber(field)"
    >
  <div class="underline"></div>
  <label>{{ field | titlecase }}</label>
</div>
</div>
 

    <div class="form-row">
      <div class="input-data">
        <input type="chart" required class="input" 
       placeholder=" " name="Tasa Beneficiar" 
       [(ngModel)]="product['Tasa Beneficiar']"
       (keypress)="allowNumbers($event)"       
       [ngStyle]="{'color': num(product['Tasa Beneficiar']) < 0 ? 'red' : 'green'}">
        <div class="underline"></div>
        <label>Tasa Beneficiar</label>
      </div>
    </div>

  </form>
  
  <!-- Buttons for different actions -->
  <div class="form">
    <button class="custom-button" (click)="addProduct()">
      {{ selectedProductIndex === null ? 'Agregar Producto' : 'Actualizar Producto' }}
    </button>
    <button *ngIf="productList.length > 0" class="custom-button" (click)="resetForm()">Nuevo Producto  </button>
    <button *ngIf="productList.length > 0" class="custom-button" (click)="toggleProductList() ">Mostrar Productos</button> 
    <button *ngIf="productList.length > 0" class="custom-button delete" (click)="deleteProduct(selectedProductIndex!)">Eliminar Producto</button>
    
  <!-- Dropdown to choose a product for edit/delete -->
  <div *ngIf="productList.length > 0" class="dropdown-group">
    <select [(ngModel)]="selectedProductIndex" class="dropdown"
      (change)="chooseProduct(selectedProductIndex!)">
      <option *ngFor="let product of productList; let i = index" [value]="i" >
        {{ product['Nombre Producto'] }} </option>
    </select>
  </div>
  
  </div>
  <!-- Display all products -->
  <div *ngIf="showAllProducts && productList.length > 0">
    <h2>Product List</h2>
    <ul>selectedProductIndex
      <li *ngFor="let item of productList; let idx = index">
        <strong>Product {{ item['Nombre Producto']}}:</strong> {{ item | json }}
      </li>
    </ul>
  </div>
  
  <!-- Message if no products are present -->
  <div *ngIf="showAllProducts && productList.length === 0">
    <p>No products entered yet.</p>
  </div>
  
<div>
  <form class="form" *ngIf="access">
      <div class="form-row">
      <div class="input-data">
        <input type="chart" required class="input" 
               placeholder=" " name="documento" 
               [(ngModel)]="documento"
               (keyup)="documentoNumber()"
               >
        <div class="underline"></div>
        <label>Documento</label>
      </div>
    </div>
    
    <button [disabled]="!documento" class="custom-button" (click)="searchData()"> GET DATA</button>
 
 </form>
 </div>
